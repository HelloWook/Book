# ì•¡ì…˜, ê³„ì‚°, ë°ì´í„°

`ì•¡ì…˜` : ì‹¤í–‰ íšŸìˆ˜ì™€ ì‹œì ì— ì˜ì¡´í•œë‹¤. ë¶€ìˆ˜íš¨ê³¼ë¼ ì¹­í•œë‹¤.

`ê³„ì‚°` : ì…ë ¥ìœ¼ë¡œ ì¶œë ¥ì„ ê³„ì‚°í•œë‹¤. ìˆœìˆ˜í•¨ìˆ˜ë¼ ì¹­í•œë‹¤.

`ì´ë²¤íŠ¸` : ë°ì´í„°ì— ëŒ€í•œ ì‚¬ì‹¤ì´ë‹¤.

### í•¨ìˆ˜í˜• ì½”ë”©ì„ ì ìš©í•œ ì˜ˆì‹œ

```js
// ì‡¼í•‘ë¬¼ ì¥ë°”êµ¬ë‹ˆ í”„ë¡œê·¸ë¨
var shoppingCart = [];
var shoppingCartTotal = 0;

const add_item_to_card = (item, price) => {
  shoppingCart.push({ item, price });
  shoppingCartTotal += price;
};

const calc_total_price = () => {
  shoppingCartTotal = shoppingCart.reduce(
    (total, item) => total + item.price,
    0
  );

  // ë”ì„ ì—…ë°ì´íŠ¸ í•˜ëŠ” í•¨ìˆ˜
  //set_cart_total_dom();
  // ëª¨ë“  ì•„ì´ì½˜ ì—…ì´íŠ¸ë¥¼ ìœ„í•´ ì—…ë°ì´íŠ¸ í•¨ìˆ˜ í˜¸ì¶œ
  update_shipping_icon();
  // ì„¸ê¸ˆ ê³„ì‚°
  calc_tax();
};

// ë§Œì•½ êµ¬ë§¤ ë²„íŠ¼ì— ë°°ì†¡ ì•„ì´ì½˜ì„ í‘œì‹œí•´ì•¼í•œë‹¤ë©´?
const update_shipping_icon = () => {
  var shoppingCart_buttons = document.getElementsByClassName(
    "shoppingCart_button"
  );
  for (var i = 0; i < shoppingCart_buttons.length; i++) {
    var button = shoppingCart_buttons[i];
    var item = button.item;

    // ë§Œì•½ ì•„ì´í…œì˜ ê°€ê²©ê³¼ ì¥ë°”êµ¬ë‹ˆì˜ ì´ ê°€ê²©ì´ 100000ì› ì´ìƒì´ë©´ ë°°ì†¡ ì•„ì´ì½˜ì„ í‘œì‹œ
    if (item.price + shoppingCartTotal >= 100000) {
      button.innerHTML = "ë°°ì†¡";
    } else {
      button.innerHTML = "ë°°ì†¡ ë¬´ë£Œ";
    }
  }
};

// ì„¸ê¸ˆ ê³„ì‚°
const calc_tax = () => {
  var tax = shoppingCartTotal * 0.1;
  return tax;
};
```

## â… . ê¸°ì¡´ ì½”ë“œì˜ ì£¼ìš” ë¬¸ì œì 

ì´ˆê¸° ì½”ë“œëŠ” ì „ì—­ ë³€ìˆ˜ì™€ DOMì— ì§ì ‘ ì˜ì¡´í•˜ì—¬ ë‹¤ìŒê³¼ ê°™ì€ ë¬¸ì œì ì„ ê°€ì§‘ë‹ˆë‹¤.

- **ì „ì—­ ë³€ìˆ˜ ì˜ì¡´ì„±**: `shoppingCart`, `shoppingCartTotal` ê°™ì€ ì „ì—­ ë³€ìˆ˜ë¥¼ ì—¬ëŸ¬ í•¨ìˆ˜ê°€ ì§ì ‘ ì½ê³  ìˆ˜ì •í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ **ì•”ì‹œì (Implicit) ì…ì¶œë ¥**ì€ ì½”ë“œì˜ íë¦„ì„ ì˜ˆì¸¡í•˜ê¸° ì–´ë µê²Œ ë§Œë“­ë‹ˆë‹¤.
- **ì±…ì„ì˜ í˜¼í•©**: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§(ì˜ˆ: ì´ì•¡ ê³„ì‚°)ê³¼ UI ë¡œì§(ì˜ˆ: DOM ì—…ë°ì´íŠ¸)ì´ í•˜ë‚˜ì˜ í•¨ìˆ˜ ì•ˆì— ì„ì—¬ ìˆìŠµë‹ˆë‹¤.
- **í…ŒìŠ¤íŠ¸ì˜ ì–´ë ¤ì›€**: ì „ì—­ ìƒíƒœì™€ DOMì— ì§ì ‘ ì˜ì¡´í•˜ê¸° ë•Œë¬¸ì—, ë…ë¦½ì ì¸ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸(Unit Test) ì‘ì„±ì´ ë§¤ìš° ê¹Œë‹¤ë¡­ìŠµë‹ˆë‹¤.

---

## â…¡. í•´ê²° ì „ëµ: ì•¡ì…˜(Action)ê³¼ ê³„ì‚°(Calculation) ë¶„ë¦¬

ì½”ë“œë¥¼ ë‘ ê°€ì§€ ì—­í• ë¡œ ëª…í™•íˆ ë‚˜ëˆ„ì–´ ë¬¸ì œë¥¼ í•´ê²°í•©ë‹ˆë‹¤.

### ê³„ì‚° (Calculation)

- **ì—­í• **: ë°ì´í„°ë¥¼ ë°›ì•„(ì…ë ¥) ìƒˆë¡œìš´ ë°ì´í„°ë¥¼ ë§Œë“¤ì–´ ë°˜í™˜(ì¶œë ¥)í•˜ëŠ” ìˆœìˆ˜í•œ ë¡œì§.
- **íŠ¹ì§•**:
  - ì˜¤ì§ ì¸ì(arguments)ë¡œë§Œ ë°ì´í„°ë¥¼ ë°›ê³ , `return`ìœ¼ë¡œë§Œ ê²°ê³¼ë¥¼ ë‚´ë³´ëƒ…ë‹ˆë‹¤. (**ëª…ì‹œì  ì…ì¶œë ¥**)
  - ì™¸ë¶€ ìƒíƒœë¥¼ ë³€ê²½í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. (No Side Effects)
  - ë™ì¼í•œ ì…ë ¥ì— ëŒ€í•´ í•­ìƒ ë™ì¼í•œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. (**ìˆœìˆ˜ í•¨ìˆ˜**)
- **ì˜ˆì‹œ**: `const add = (a, b) => a + b;`

### ì•¡ì…˜ (Action) ğŸ¬

- **ì—­í• **: 'ê³„ì‚°' í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ì–»ì€ ë°ì´í„°ë¥¼ ê°€ì§€ê³  ì‹¤ì œ ì„¸ìƒì— ë³€ê²½ì„ ì¼ìœ¼í‚¤ëŠ” ì—­í• .
- **íŠ¹ì§•**:
  - í˜¸ì¶œ ì‹œì ì´ë‚˜ íšŸìˆ˜ì— ë”°ë¼ ì‹œìŠ¤í…œ ìƒíƒœê°€ ë‹¬ë¼ì§‘ë‹ˆë‹¤.
  - ì „ì—­ ë³€ìˆ˜ ìˆ˜ì •, DOM ì—…ë°ì´íŠ¸, API ìš”ì²­ ë“±ì˜ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.
- **ì˜ˆì‹œ**: `document.getElementById('total').innerText = total;`

---

## â…¢. ë¦¬íŒ©í† ë§ ì˜ˆì‹œ ì½”ë“œ

### 1. ìƒí’ˆ ì¶”ê°€: `add_item`

**ë¬¸ì œ**: ì›ë³¸ ë°°ì—´ì„ ì§ì ‘ ìˆ˜ì •í•˜ì—¬ **ë¶ˆë³€ì„±(Immutability)**ì„ í•´ì¹©ë‹ˆë‹¤.

```javascript
// Before: ì›ë³¸ ë°°ì—´ì„ ì§ì ‘ ìˆ˜ì •í•˜ëŠ” 'ì•¡ì…˜'
const add_item_to_card = (item, price) => {
  shoppingCart.push({ item, price });
};

// After: ìƒˆë¡œìš´ ë°°ì—´ì„ ë°˜í™˜í•˜ëŠ” 'ê³„ì‚°'
const add_item = (cart, item) => {
  const new_cart = [...cart]; // ë°°ì—´ ë³µì‚¬ë¡œ ë¶ˆë³€ì„± ìœ ì§€
  new_cart.push(item);
  return new_cart;
};
```

2. ì´ì•¡ ê³„ì‚°: calc_total
   ë¬¸ì œ: ê³„ì‚° ë¡œì§ê³¼ ë‹¤ë¥¸ ì•¡ì…˜ í˜¸ì¶œì´ ì„ì—¬ìˆìŠµë‹ˆë‹¤.

```js
// Before: ê³„ì‚°ê³¼ ë‹¤ë¥¸ ì•¡ì…˜ í˜¸ì¶œì´ ì„ì¸ 'ì•¡ì…˜'
const calc_total_price = () => {
  shoppingCartTotal = shoppingCart.reduce(
    (total, item) => total + item.price,
    0
  );
  update_shipping_icon();
  calc_tax();
};

// After: ìˆœìˆ˜í•˜ê²Œ ì´ì•¡ë§Œ ê³„ì‚°í•˜ëŠ” 'ê³„ì‚°'
const calc_total = (cart) => {
  return cart.reduce((total, item) => total + item.price, 0);
};
```

3. ë°°ì†¡ë¹„ ë° ì„¸ê¸ˆ ê³„ì‚°
   ë¬¸ì œ: ë°°ì†¡ë¹„ ì •ì±… ê²°ì •, ì„¸ê¸ˆ ê³„ì‚° ë¡œì§ì´ DOM ì—…ë°ì´íŠ¸ì™€ ê°™ì€ 'ì•¡ì…˜'ê³¼ ê²°í•©ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

```js
// After: ë¡œì§ì„ 'ê³„ì‚°'ìœ¼ë¡œ ë¶„ë¦¬

// ë¬´ë£Œ ë°°ì†¡ ì—¬ë¶€ë¥¼ ê²°ì •í•˜ëŠ” 'ê³„ì‚°'
const gets_free_shipping = (total) => {
  return total >= 100000;
};

// ì„¸ê¸ˆì„ ê³„ì‚°í•˜ëŠ” 'ê³„ì‚°'
const calc_tax = (total) => {
  return total * 0.1;
};

// ë¶„ë¦¬ëœ ê³„ì‚°ë“¤ì„ ì¡°í•©í•´ DOMì„ ì—…ë°ì´íŠ¸í•˜ëŠ” 'ì•¡ì…˜'
const update_ui = (cart) => {
  const total = calc_total(cart);
  const isFree = gets_free_shipping(total);
  // ... ì´ ë°ì´í„°ë¥¼ ì‚¬ìš©í•´ DOMì„ ë³€ê²½í•˜ëŠ” ì½”ë“œ
};
```
